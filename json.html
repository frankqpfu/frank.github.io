
<html>
 <script src="http://libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>
<head>
<title>HTML JSON格式化,可以去除回车符</title>
</head>
<style type="text/css">
    body {
        font-size:14px;
    }
    #input_json{
        width:1000px;
        height:600px;               
        font-family:Consolas;
    }
    #btn_format {
        margin:580px 0px 0px 10px;
        width:100px;
        height:40px;
    }
    #error_message{
        display:block;
    }
</style>
 <script type="text/javascript">
   function json_format()
   {
    　 var text = $('#input_json').val(); //获取json格式内容
       try {
            $("#error_message").html("");
            text = text.replace(/\r/g,'');
            text = text.replace(/\n/g,'');
            var jsonObj = JSON.parse(text);
            var result = JSON.stringify(jsonObj, null, 2);//将字符串转换成json对象
            $('#input_json').val(result);
       }catch(e) {
            $("#error_message").html(e.message);
       }
   }
   
</script>
<body>
    <div style="float:left">
        <span style="display:block">JSON:</span>
        <textarea id="input_json" rows="5" cols="5"></textarea>
    </div>
    <div>
    <div style="float:left">
        <input id="btn_format" type="button" onclick="json_format()" value="格式话"></input>
        <span id="error_message"></span>
    </div>
</body>
